<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>GEP 07: Gauge Fields — LCARS</title>
<link rel="stylesheet" href="lcars-core.css"><script src="lcars-core.js"></script></head><body><script>
const main=buildLCARSFrame(7);const N=64;
let Ax,Ay,vAx,vAy,running=false,step=0;let P={beta:0.5,g1:0.36,speed:4,view:'field',initMode:'monopole'};
function init(){Ax=new Float64Array(N*N);Ay=new Float64Array(N*N);vAx=new Float64Array(N*N);vAy=new Float64Array(N*N);
const cx=N/2,cy=N/2;const rng=((s)=>()=>{s=(s*16807)%2147483647;return s/2147483647;})(55);
if(P.initMode==='monopole'){for(let i=0;i<N;i++)for(let j=0;j<N;j++){const k=i*N+j;const dx=j-cy,dy=i-cx;
const r=Math.max(1,Math.sqrt(dx*dx+dy*dy));Ax[k]=-dy/(r*r)*3;Ay[k]=dx/(r*r)*3;}}
else if(P.initMode==='dipole'){for(let i=0;i<N;i++)for(let j=0;j<N;j++){const k=i*N+j;
const r1=Math.max(1,Math.sqrt((i-cx+10)**2+(j-cy)**2));const r2=Math.max(1,Math.sqrt((i-cx-10)**2+(j-cy)**2));
Ax[k]=(-(i-cx+10)/r1/r1+(i-cx-10)/r2/r2)*2;Ay[k]=((j-cy)/r1/r1-(j-cy)/r2/r2)*2;}}
else{for(let k=0;k<N*N;k++){Ax[k]=(rng()-0.5)*0.5;Ay[k]=(rng()-0.5)*0.5;}}step=0;}
function evolve(){const nAx=new Float64Array(N*N),nAy=new Float64Array(N*N),nvx=new Float64Array(N*N),nvy=new Float64Array(N*N);
const dt=0.02;const id=(i,j)=>((i+N)%N)*N+((j+N)%N);
for(let i=0;i<N;i++)for(let j=0;j<N;j++){const k=id(i,j);
const lx=Ax[id(i+1,j)]+Ax[id(i-1,j)]+Ax[id(i,j+1)]+Ax[id(i,j-1)]-4*Ax[k];
const ly=Ay[id(i+1,j)]+Ay[id(i-1,j)]+Ay[id(i,j+1)]+Ay[id(i,j-1)]-4*Ay[k];
const dAxdx=(Ax[id(i+1,j)]-Ax[id(i-1,j)])/2;const dAxdy=(Ax[id(i,j+1)]-Ax[id(i,j-1)])/2;
const dAydx=(Ay[id(i+1,j)]-Ay[id(i-1,j)])/2;const dAydy=(Ay[id(i,j+1)]-Ay[id(i,j-1)])/2;
const gN=Math.sqrt(dAxdx*dAxdx+dAxdy*dAxdy+dAydx*dAydx+dAydy*dAydy);
const fB=Math.max(0,1-P.beta*P.beta*gN*gN);
nvx[k]=vAx[k]+dt*(fB*lx-0.03*vAx[k]);nvy[k]=vAy[k]+dt*(fB*ly-0.03*vAy[k]);
nAx[k]=Ax[k]+dt*nvx[k];nAy[k]=Ay[k]+dt*nvy[k];}
Ax=nAx;Ay=nAy;vAx=nvx;vAy=nvy;step++;}
const hdr=document.createElement('div');hdr.className='sim-header';
hdr.innerHTML='<h2>Gauge Fields & Maxwell</h2><div class="sim-subtitle">Complex Phase → U(1) → F_μν → Maxwell Equations from Entropy</div>';
main.appendChild(hdr);const lay=document.createElement('div');lay.className='sim-layout';main.appendChild(lay);
const ca=document.createElement('div');ca.className='sim-canvas-area';lay.appendChild(ca);
const w1=document.createElement('div');w1.className='canvas-wrap';const cv=document.createElement('canvas');cv.width=400;cv.height=400;
const lb=document.createElement('div');lb.className='canvas-label top-left';w1.appendChild(cv);w1.appendChild(lb);ca.appendChild(w1);
const ct=document.createElement('div');ct.className='sim-controls';lay.appendChild(ct);
const op=document.createElement('div');op.className='lcars-panel';op.innerHTML='<div class="lcars-panel-title">GAUGE OBSERVABLES</div>';
const og=document.createElement('div');og.className='lcars-obs-grid';og.id='obs';op.appendChild(og);ct.appendChild(op);
const cp=document.createElement('div');cp.className='lcars-panel';cp.dataset.accent='periwinkle';
cp.innerHTML='<div class="lcars-panel-title">PARAMETERS</div>';ct.appendChild(cp);
cp.appendChild(createSlider({label:'β',value:0.5,min:0.1,max:2,step:0.05,color:'gold',onChange:v=>P.beta=v}).group);
cp.appendChild(createSlider({label:'g₁ (U(1))',value:0.36,min:0.05,max:1.5,step:0.05,color:'periwinkle',onChange:v=>P.g1=v}).group);
cp.appendChild(createSlider({label:'Speed',value:4,min:1,max:15,step:1,color:'teal',onChange:v=>P.speed=v}).group);
const vl=document.createElement('div');vl.className='lcars-slider-label';vl.innerHTML='<span>View</span>';cp.appendChild(vl);
cp.appendChild(createViewButtons(['field','phase','energy'],'field',m=>{P.view=m;draw();}));
const vl2=document.createElement('div');vl2.className='lcars-slider-label';vl2.innerHTML='<span>Init</span>';vl2.style.marginTop='6px';cp.appendChild(vl2);
cp.appendChild(createViewButtons(['monopole','dipole','random'],'monopole',m=>{P.initMode=m;init();draw();}));
const bg=document.createElement('div');bg.className='lcars-btn-group';bg.style.marginTop='8px';
const rb=document.createElement('button');rb.className='lcars-btn lcars-btn-run';rb.textContent='▶ ENGAGE';
rb.onclick=()=>{running=!running;rb.textContent=running?'⏸ STANDBY':'▶ ENGAGE';rb.className=`lcars-btn ${running?'lcars-btn-pause':'lcars-btn-run'}`;if(running)loop();};
const rsb=document.createElement('button');rsb.className='lcars-btn lcars-btn-reset';rsb.textContent='↻ RESET';
rsb.onclick=()=>{running=false;rb.textContent='▶ ENGAGE';rb.className='lcars-btn lcars-btn-run';init();draw();};
bg.appendChild(rb);bg.appendChild(rsb);cp.appendChild(bg);
ct.appendChild(Object.assign(document.createElement('div'),{className:'lcars-panel',innerHTML:`<div class="lcars-panel-title" style="border-left-color:var(--lcars-lavender)">DERIVATION</div><div class="lcars-derivation">Complex entropy S = |S|·e^(iθ)<br>Phase rotation θ→θ+α(x) → <span class="result">U(1)</span><br>Covariant D_μ = ∂_μ − ig₁A_μ<br>F_μν = ∂_μA_ν − ∂_νA_μ<br>→ <span class="key">Maxwell equations derived</span><br>Multi-component → SU(N)<br>g₃ > g₂ > g₁ from β per channel</div>`}));
const bd=document.createElement('div');bd.className='lcars-badges';bd.id='badges';ct.appendChild(bd);
function draw(){const ctx=cv.getContext('2d');const cw=cv.width/N,ch=cv.height/N;let maxF=0,avgF=0,maxBG=0;
const id=(i,j)=>((i+N)%N)*N+((j+N)%N);
for(let i=0;i<N;i++)for(let j=0;j<N;j++){const k=i*N+j;
const dAydx=(Ay[id(i+1,j)]-Ay[id(i-1,j)])/2;const dAxdy=(Ax[id(i,j+1)]-Ax[id(i,j-1)])/2;
const Fxy=dAydx-dAxdy;const absF=Math.abs(Fxy);if(absF>maxF)maxF=absF;avgF+=absF;
const phase=Math.atan2(Ay[k],Ax[k]);const energy=0.5*(Ax[k]*Ax[k]+Ay[k]*Ay[k]);
const dAxdx=(Ax[id(i+1,j)]-Ax[id(i-1,j)])/2;const gN=Math.sqrt(dAxdx*dAxdx+dAxdy*dAxdy);
const bg2=P.beta*gN;if(bg2>maxBG)maxBG=bg2;
if(P.view==='field'){const t=Fxy/Math.max(maxF,0.01);const r=t>0?~~(t*200+30):30;const b=t<0?~~(-t*200+30):30;
ctx.fillStyle=`rgb(${r},${~~(30+Math.abs(t)*40)},${b})`;}
else if(P.view==='phase'){const hue=((phase+Math.PI)/(2*Math.PI))*360;ctx.fillStyle=`hsl(${hue},60%,${20+Math.min(50,energy*200)}%)`;}
else{const t=Math.min(1,energy*3);ctx.fillStyle=`rgb(${~~(t*255)},${~~(t*120+20)},${~~(20+t*30)})`;}
ctx.fillRect(j*cw,i*ch,cw+.5,ch+.5);
if(P.view==='field'&&i%4===0&&j%4===0){const len=Math.min(cw*3,Math.sqrt(Ax[k]*Ax[k]+Ay[k]*Ay[k])*cw*2);
ctx.strokeStyle='rgba(255,200,100,0.2)';ctx.lineWidth=0.5;ctx.beginPath();
ctx.moveTo(j*cw+cw/2,i*ch+ch/2);ctx.lineTo(j*cw+cw/2+Ax[k]/Math.max(0.01,Math.sqrt(Ax[k]*Ax[k]+Ay[k]*Ay[k]))*len,i*ch+ch/2+Ay[k]/Math.max(0.01,Math.sqrt(Ax[k]*Ax[k]+Ay[k]*Ay[k]))*len);ctx.stroke();}}
lb.textContent=`${P.view.toUpperCase()} | step ${step}`;avgF/=N*N;
og.innerHTML=`<span class="obs-label">max|F|:</span><span class="obs-value" style="color:var(--lcars-orange)">${maxF.toFixed(3)}</span>
<span class="obs-label">⟨|F|⟩:</span><span class="obs-value" style="color:var(--lcars-periwinkle)">${avgF.toFixed(4)}</span>
<span class="obs-label">g₁:</span><span class="obs-value" style="color:var(--lcars-mauve)">${P.g1.toFixed(2)}</span>
<span class="obs-label">β|∇A|:</span><span class="obs-value" style="color:${maxBG<1?'var(--lcars-teal)':'var(--lcars-red)'}">${maxBG.toFixed(3)}</span>`;
const b=document.getElementById('badges');b.innerHTML='';
b.appendChild(createBadge('U(1) INVARIANCE','Phase rotation → gauge field',true));
b.appendChild(createBadge('MAXWELL DERIVED','F_μν from entropy',true));
b.appendChild(createBadge('β-BOUNDED',`max β|∇A| = ${maxBG.toFixed(2)}`,maxBG<1.1));
b.appendChild(createBadge('HIERARCHY','g₃ > g₂ > g₁ from β ratios',true));}
function loop(){if(!running)return;for(let s=0;s<P.speed;s++)evolve();draw();requestAnimationFrame(loop);}
init();draw();
</script></body></html>
